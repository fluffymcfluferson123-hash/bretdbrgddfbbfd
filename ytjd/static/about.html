<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="referrer" content="no-referrer" />
    <meta http-equiv="X-Frame-Options" content="SAMEORIGIN" />
    <meta http-equiv="X-Content-Type-Options" content="nosniff" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="shortcut icon" id="tab-favicon" href="favicon.png" />
    <title id="tab-title">About/Help</title>
    <link rel="stylesheet" href="/assets/css/global.css?v=2" />
    <link rel="stylesheet" href="/assets/css/nav.css" />
    <script src="https://kit.fontawesome.com/1237c86ba0.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="/static/ui.css" />
    <link rel="stylesheet" href="/static/notifications.css" />
    <script type="module" src="/static/session-nav.js"></script>
  </head>
  <body>
    <style>
      .c-container {
        position: fixed;
        top: 15%;
        left: 5%;
        width: 90%;
        height: 80vh;
        border-radius: 15px;
        color: var(--text-primary);
      }
      .card {
        padding: 10px;
        background-color: var(--background-settings);
        border-radius: 15px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        transition: all 0.3s ease;
        height: 100%;
        display: flex;
        justify-content: center;
        align-items: center;
        flex-direction: column;
      }
      .card h3 {
        font-size: 45px;
        margin-bottom: 10px;
      }
      .card p {
        font-size: 15px;
        color: gray;
      }
    </style>
    <div class="fixed-nav-bar"></div>
    <div class="c-container">
      <div class="card">
        <h3>About/Help</h3>
        <p>Edit later</p>
      </div>
    </div>
    <script src="/assets/scripts/m.js?v=82"></script>

    <section class="rm-section">
      <h2>Roadmap</h2>
      <div class="rm-filters">
        <button class="rm-filter active" data-status="all" aria-pressed="true">All</button>
        <button class="rm-filter" data-status="planned">Planned</button>
        <button class="rm-filter" data-status="in-progress">In progress</button>
        <button class="rm-filter" data-status="done">Done</button>
      </div>
      <div class="rm-grid" id="rmGrid"></div>
    </section>
    <script>
      document.addEventListener("DOMContentLoaded", async () => {
        const grid = document.getElementById("rmGrid")
        const filters = document.querySelectorAll(".rm-filter")
        let items = []
        try {
          const r = await fetch("/api/roadmaps/public", { credentials: "same-origin" })
          const d = await r.json()
          items = (d && d.items) || []
        } catch {}
        items.sort(
          (a, b) =>
            (a.sort_order || 0) - (b.sort_order || 0) ||
            (a.target_date ? new Date(a.target_date) - new Date(b.target_date || 0) : b.target_date ? -1 : 0) ||
            new Date(b.created_at) - new Date(a.created_at)
        )
        const render = (status) => {
          grid.innerHTML = ""
          items
            .filter((r) => status === "all" || r.status === status)
            .forEach((r) => {
              const card = document.createElement("div")
              card.className = "rm-card"
              card.innerHTML = `<h3>${r.title}</h3><span class="rm-status ${r.status}">${r.status}</span>${r.target_date ? `<div class="rm-target">Target: ${r.target_date}</div>` : ""}<div class="rm-desc">${r.description || ""}</div>`
              card.addEventListener("click", () => {
                const ex = card.getAttribute("aria-expanded") === "true"
                card.setAttribute("aria-expanded", ex ? "false" : "true")
              })
              grid.appendChild(card)
            })
        }
        filters.forEach((btn) =>
          btn.addEventListener("click", () => {
            filters.forEach((b) => {
              b.classList.remove("active")
              b.setAttribute("aria-pressed", "false")
            })
            btn.classList.add("active")
            btn.setAttribute("aria-pressed", "true")
            render(btn.dataset.status)
          })
        )
        render("all")
      })
    </script>
  </body>
</html>
